var m=Object.defineProperty;var c=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var p=(o,e,i)=>e in o?m(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,u=(o,e)=>{for(var i in e||(e={}))w.call(e,i)&&p(o,i,e[i]);if(c)for(var i of c(e))y.call(e,i)&&p(o,i,e[i]);return o};import{k as b}from"./vendor.ceaa6892.js";const v=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerpolicy&&(d.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?d.credentials="include":t.crossorigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(t){if(t.ep)return;t.ep=!0;const d=i(t);fetch(t.href,d)}};v();const n=b({width:1200,height:500,root:document.getElementById("app")}),h={froggySpeed:200},k={touches:0,wave:1,lives:3,locked:!1,dropzoneSize:0,padSize:190,ballSpeed:400};let r;const S=()=>pos(width()/2-5,height()/2-5);loadSprite("pad","./assets/pad.png");loadSprite("ball","./assets/ball.png");n.scene("welcome",()=>{add([rect(width(),height()),pos(0,0),color(0,0,0)]),add([text("spong",{size:50,font:"sink"}),origin("center"),pos(width()/2,height()/2)]),add([text("press space",{size:20,font:"sink"}),origin("center"),pos(width()/2,height()/2+height()*.2)]),keyDown("space",()=>{n.go("game")})});n.scene("game",()=>{r=O(),layers(["background","ui","game"],"game");const o=add([pos(20,180),rect(15,r.padSize),area(),solid(),outline(1),health(3),layer("game"),color(255,255,255),"pad"]),e=add([pos(300,300),solid(),area(),S(),origin("center"),layer("game"),z(200),sprite("ball"),"ball",{dir:vec2(1,-.6),speed:400}]);add([pos(0,497),rect(width(),3),solid(),area(),color(120,120,120),"wall"]),add([pos(0,0),rect(width(),3),solid(),area(),color(120,120,120),"wall"]),add([pos(1197,0),rect(3,height()),solid(),area(),color(120,120,120),"backwall"]),add([pos(0,0),rect(10,height()),solid(),area(),color(0,0,0),"hell"]),add([pos(598,0),rect(4,height()),color(30,30,30),layer("background"),z(-1)]),add([rect(width(),height()),color(0,0,0),layer("background"),z(-100)]);const i=add([rect(r.dropzoneSize,height()),pos(0,0),color(100,0,0),z(-99),layer("background"),"dropzone"]),l=M();keyDown("a",()=>{r.locked||o.move(0,-h.froggySpeed)}),keyDown("q",()=>{r.locked||o.move(0,h.froggySpeed)}),action("ball",t=>{t.move(t.dir.scale(r.ballSpeed)),t.pos.x<r.dropzoneSize&&t.dir.x<0?(r.locked=!0,o.use(color(0,0,255))):(r.locked=!1,o.use(color(255,255,255)))}),collides("ball","pad",(t,d,s)=>{e.dir=vec2(-1*e.dir.x,e.dir.y+(Math.random()-.5)/10),r.touches++,o.use(outline(1)),setTimeout(()=>{o.use(outline(0))},100)}),collides("ball","backwall",(t,d,s)=>{e.dir=vec2(-1*e.dir.x,e.dir.y+(Math.random()-.5)/10),e.speed=e.speed+5}),collides("ball","wall",()=>{e.dir=vec2(e.dir.x,-1*e.dir.y)}),collides("ball","obstacle",(t,d,s)=>{e.dir=vec2(e.dir.x,-1*e.dir.y)}),collides("ball","hell",()=>{shake(10),o.hurt(1),e.moveTo(width()/2-5,height()/2-5),r.lives=o.hp(),r.dropzoneSize=0}),o.on("death",()=>{destroy(o),destroy(e),add([text("GAME OVER",{size:150,font:"sink"}),color(200,20,20),origin("center"),pos(width()/2,height()/2)]),setTimeout(()=>{n.go("welcome")},2e3)}),a("dropzoneSize",t=>{i.use(rect(t,height()))}),a("touches",t=>{r.dropzoneSize+=100}),a("wave",t=>{r.padSize-=15,o.use(rect(15,r.padSize)),r.ballSpeed+=25,l("waves",t)}),a("lives",t=>{l("lives",t)}),a("ballSpeed",t=>{l("speed",t)})});n.go("welcome");focus();const f=[];function a(o,e){f.push({key:o,cb:e})}function x(o,e){f.filter(i=>i.key===o).map(i=>i.cb(e))}let g={dropzoneSize:o=>o>width()/2?(r.wave++,0):Math.min(width()/2,o)};function L(o,e){return typeof g[o]=="function"?g[o](e):e}function M(){add([text("balls",{size:15,font:"sink"}),pos(width()/2-50,20),origin("center"),color(120,120,120),layer("ui")]),add([text("wave",{size:15,font:"sink"}),pos(width()/2+50,20),origin("center"),color(120,120,120),layer("ui")]);const o={lives:add([text(r.lives,{size:50,font:"sink"}),pos(width()/2-50,60),origin("center"),color(120,120,120),layer("ui")]),waves:add([text(r.wave,{size:50,font:"sink"}),pos(width()/2+50,60),origin("center"),color(120,120,120),layer("ui")]),speed:add([text(r.ballSpeed,{size:20,font:"sink"}),pos(570,height()-20),origin("center"),layer("ui"),color(120,120,120)])};return function(i,l){o[i].text=l}}function O(){return new Proxy(u({},k),{set:function(o,e,i){const l=L(e,i);return x(e,l),o[e]=l,!0}})}
